@page "/employeeoverview"
@* allows us to wait for the data to be loaded *@
@attribute [StreamRendering(true)] 
@rendermode InteractiveServer

@*Built in component*@
<PageTitle>@Title</PageTitle>
<h1>Employee Overview</h1>

@if (Employees == null) {
    <p><em>Loading...</em></p>
}
else {
    <QuickViewPopup Employee="_selectedEmployee"></QuickViewPopup>
    <div class="row">
        @foreach(var employee in Employees)
        {
            <div class="col-6 col-lg-4 col-xl-3 col-xxl-3">
                <ErrorBoundary>
                    <ChildContent>
                        <EmployeeCard Employee="employee"
                                      EmployeeQuickViewClicked="ShowQuickViewPopup"></EmployeeCard>
                    </ChildContent>
                    <ErrorContent>
                        <p class="errorUI">There is an invalid employee in the dataset.</p>
                    </ErrorContent>
                </ErrorBoundary>
                @* <EmployeeCard Employee="employee" *@
                @*     EmployeeQuickViewClicked="ShowQuickViewPopup"></EmployeeCard> *@
            </div>
        }
    </div>
}


@* @if(Employees != null) { *@


@* <table class="table table-light"> *@
@*     <thead class="table-primary"> *@
@*         <tr> *@
@*             <th></th> *@
@*             <th>Employee ID</th> *@
@*             <th>First name</th> *@
@*             <th>Last name</th> *@
@*             <th></th> *@
@*         </tr> *@
@*     </thead> *@
@*     <tbody> *@
@*        @foreach (var employee in Employees) *@
@*         { *@
@*          <tr> *@
@*             <td><img src="@($"https://gillcleerenpluralsight.blob.core.windows.net/person/{employee.EmployeeId}-small.jpg")" class="rounded-circle"/></td> *@
@*             <td>@employee.EmployeeId</td> *@
@*             <td>@employee.FirstName</td> *@
@*             <td>@employee.LastName</td> *@
@*             <td> *@
@*                <a href="@($"employeedetail/{employee.EmployeeId}")" class="btn btn-outline-primary btn-sm mb-1">Details</a> *@
@*             </td> *@
@*          </tr> *@

@*         } *@
@*     </tbody> *@
@* </table> *@
@* } *@